<!-- rule_9.2.html
copyright: &copy; 2013 Programming Research
   module: M2CM-3.2-QAC-8.1.2
  purpose: MISRA-C:2004 Rules explanation file
  history: auto-created on 30-Jul-13
-->
<!--
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
-->
<HTML><HEAD><TITLE>QA C Help - Rule 9.2</TITLE>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta http-equiv="Content-Style-Type" content="text/css">
         <link href="css/message.css" rel="stylesheet" type="text/css">
</HEAD><BODY>
<table class="heading">
<tr class="heading">
<td class="heading" rowspan=4 width="85px"><img src="QAC.png"></td>
<td class="heading" align="right" width="11px">
<a href="rule_9.1.html"><img src="left.png" alt="[previous]"></a>
</td>
<td class="heading_number"><span style="white-space:nowrap">MISRA-C:2004&nbsp;&nbsp;Rule&nbsp;&nbsp;9.2:&nbsp;&nbsp;(Required)</span></td>
<td class="heading" align="left" width="11px">
<a href="rule_9.3.html"><img src="right.png" alt="[next]"></a>
</td>
<td class="heading"/>
<td class="heading_message">Braces shall be used to indicate and match the structure in the non-zero initialisation of arrays and structures.</td>
<tr class="heading">
<td class="heading" height="1px" colspan=7 background="prqa_sep.png"/><td class="heading" width="76px"><img src="prqa_right.png"/></td></tr>
<tr class="heading">
<td colspan=4  class="heading_category"></td>
<td width="70%" class="heading_verbose"/>
<td class="heading_message"/>
</tr>
</table>
ISO C requires initialiser lists for arrays, structures and union types to be enclosed in a single pair of braces (though the behaviour if this is not done is undefined).  The rule given here goes further in requiring the use of additional braces to indicate nested structures.  This forces the programmer to explicitly consider and demonstrate the order in which elements of complex data types are initialised (e.g. multi-dimensional arrays).
<P>
For example, below are two valid (in ISO C) ways of initialising the elements of a two dimensional array, but the first does not adhere to the rule:
<p><pre class="example">
int16_t y[<code class="number">3</code>][<code class="number">2</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="number">1</code>, <code class="number">2</code>, <code class="number">3</code>, <code class="number">4</code>, <code class="number">5</code>, <code class="number">6</code> <code class="operator">&#x7D;</code>;<code class="comment">              &#x2F;&#x2A; not compliant &#x2A;&#x2F;</code>
int16_t y[<code class="number">3</code>][<code class="number">2</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="operator">&#x7B;</code> <code class="number">1</code>, <code class="number">2</code> <code class="operator">&#x7D;</code>, <code class="operator">&#x7B;</code> <code class="number">3</code>, <code class="number">4</code> <code class="operator">&#x7D;</code>, <code class="operator">&#x7B;</code> <code class="number">5</code>, <code class="number">6</code> <code class="operator">&#x7D;</code> <code class="operator">&#x7D;</code>;<code class="comment">  &#x2F;&#x2A; compliant     &#x2A;&#x2F;</code>

</pre>
<P>
A similar principle applies to structures, and nested combinations of structures, arrays and other types.
<P>
Note also that all the elements of arrays or structures can be initialised (to zero or NULL) by giving an explicit initialiser for the first element only.  If this method of initialisation is chosen then the first element should be initialised to zero (or NULL), and nested braces need not be used.
<P>
The ISO standard [2] contains extensive examples of initialisation.
<P>
The intent of Rule 9.2 is that the non-zero initialisation of arrays and structures shall require an explicit initialiser for each element, e.g. 
<p><pre class="example">
int16_t arraya1[<code class="number">5</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="number">1</code>, <code class="number">2</code>, <code class="number">3</code>, <code class="number">0</code>, <code class="number">0</code> <code class="operator">&#x7D;</code>;
<code class="comment">&#x2F;&#x2A; Compliant &#x2D; non&#x2D;zero initialisation &#x2A;&#x2F;</code>
int16_t arraya2[<code class="number">5</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="number">0</code> <code class="operator">&#x7D;</code>;
		<code class="comment">&#x2F;&#x2A; Compliant &#x2D; zero initialisation&#x2A;&#x2F;</code>
int16_t arraya3[<code class="number">5</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="number">1</code>, <code class="number">2</code>, <code class="number">3</code> <code class="operator">&#x7D;</code>;
		<code class="comment">&#x2F;&#x2A; Not Compliant &#x2D; non&#x2D;zero initialisation &#x2A;&#x2F;</code>
int16_t arraya4[<code class="number">2</code>][<code class="number">2</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="number">0</code> <code class="operator">&#x7D;</code>;
<code class="comment">&#x2F;&#x2A; Compliant &#x2D; zero initialisation at top&#x2D;level &#x2A;&#x2F;</code>
int16_t arraya5[<code class="number">2</code>][<code class="number">2</code>] <code class="operator">&#x3D;</code> <code class="operator">&#x7B;</code> <code class="operator">&#x7B;</code> <code class="number">0</code> <code class="operator">&#x7D;</code>, <code class="operator">&#x7B;</code> <code class="number">1</code>, <code class="number">2</code> <code class="operator">&#x7D;</code><code class="operator">&#x7D;</code>;
<code class="comment">&#x2F;&#x2A; Not Compliant &#x2D; zero initialisation at sub&#x2D;level &#x2A;&#x2F;</code>

</pre>
<P>
Zero or NULL initialisation shall only be applied at the top level of the array or structure.<P><HR><P>
<B>QAC messages that encompass this guideline:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0686.html">0686</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Array has fewer initializers than its declared size. Default initialization is applied to the remainder of the array elements. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0693.html">0693</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Struct initializer is missing the optional {. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0694.html">0694</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Array initializer is missing the optional {. </TD>
</TR>
</TABLE>
<P><HR>
<TABLE WIDTH="100%">
<TR>
<TD WIDTH="355px">
<IMG SRC="prqa_left.png"/>
</TD>
<TD COLSPAN=2 BACKGROUND="prqa_middle.png"/>
</TR>
</TABLE>
<P>
<BR><I><A HREF="misra.html">(c)  The Motor Industry Research Association, 2004</A></I>
<TABLE WIDTH="100%">
  <TR VALIGN="MIDDLE">
    <TD WIDTH="30%">
      <I><B>QA C Source Code Analyser 8.1.2</B></I>
      <BR><I><B>MISRA-C:2004 Compliance Module 3.2</B></I>
      <BR><I>&copy; 2013 Programming Research</I>
      <BR><I>
        www.programmingresearch.com
      </I>
    </TD>
    <TD ALIGN="CENTER" WIDTH="60%">
      <A HREF="PersonIndex.html">Personality Groups</A> | 
      <A HREF="Glossary.html">Glossary</A> | 
      <A HREF="MessageIndex.html">Message Index</A>
      | <A HREF="MISRA-C_2004Index.html">MISRA-C:2004 Rule Index</A>
    </TD>
    <TD ALIGN="RIGHT" WIDTH="10%">
      <A HREF="messages.htm">Contents</A>
    </TD>
  </TR>
</TABLE>
</BODY></HTML>
