<!-- rule_12.4.html
copyright: &copy; 2013 Programming Research
   module: M2CM-3.2-QAC-8.1.2
  purpose: MISRA-C:2004 Rules explanation file
  history: auto-created on 30-Jul-13
-->
<!--
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
-->
<HTML><HEAD><TITLE>QA C Help - Rule 12.4</TITLE>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta http-equiv="Content-Style-Type" content="text/css">
         <link href="css/message.css" rel="stylesheet" type="text/css">
</HEAD><BODY>
<table class="heading">
<tr class="heading">
<td class="heading" rowspan=4 width="85px"><img src="QAC.png"></td>
<td class="heading" align="right" width="11px">
<a href="rule_12.3.html"><img src="left.png" alt="[previous]"></a>
</td>
<td class="heading_number"><span style="white-space:nowrap">MISRA-C:2004&nbsp;&nbsp;Rule&nbsp;&nbsp;12.4:&nbsp;&nbsp;(Required)</span></td>
<td class="heading" align="left" width="11px">
<a href="rule_12.5.html"><img src="right.png" alt="[next]"></a>
</td>
<td class="heading"/>
<td class="heading_message">The right hand operand of a logical && or || operator shall not contain side effects.</td>
<tr class="heading">
<td class="heading" height="1px" colspan=7 background="prqa_sep.png"/><td class="heading" width="76px"><img src="prqa_right.png"/></td></tr>
<tr class="heading">
<td colspan=4  class="heading_category"></td>
<td width="70%" class="heading_verbose"/>
<td class="heading_message"/>
</tr>
</table>
There are some situations in C code where certain parts of expressions may not be evaluated.  If these sub-expressions contain side effects then those side effects may or may not occur, depending on the values of other sub-expressions.
<P>
The operators which can lead to this problem are &&, || and ?:.  In the case of the first two (logical operators) the evaluation of the right-hand operand is conditional on the value of the left-hand operand.  In the case of the ?: operator, either the second or third operands are evaluated but not both.  The conditional evaluation of the right hand operand of one of the logical operators can easily cause problems if the programmer relies on a side effect occurring.  The ?: operator is specifically provided to choose between two sub-expressions, and is therefore less likely to lead to mistakes.
<P>
For example:
<p><pre class="example">
<code class="keyword">if</code> <code class="operator">&#x28;</code> ishigh <code class="operator">&amp;</code><code class="operator">&amp;</code> <code class="operator">&#x28;</code> x <code class="operator">&#x3D;</code><code class="operator">&#x3D;</code> i<code class="operator">&#x2B;</code><code class="operator">&#x2B;</code> <code class="operator">&#x29;</code> <code class="operator">&#x29;</code><code class="comment">     &#x2F;&#x2A; Not compliant                 &#x2A;&#x2F;</code>
<code class="keyword">if</code> <code class="operator">&#x28;</code> ishigh <code class="operator">&amp;</code><code class="operator">&amp;</code> <code class="operator">&#x28;</code> x <code class="operator">&#x3D;</code><code class="operator">&#x3D;</code> f<code class="operator">&#x28;</code> x <code class="operator">&#x29;</code> <code class="operator">&#x29;</code> <code class="operator">&#x29;</code><code class="comment">  &#x2F;&#x2A; Only acceptable if f&#x28; x &#x29; is
                                     known to have no side effects &#x2A;&#x2F;</code>

</pre>
<P>
The operations that cause side effects are described in section 5.1.2.3 of ISO/IEC 9899:1990 [2] as accessing a volatile object, modifying an object, modifying a file, or calling a function that does any of those operations, which cause changes in the state of the execution environment of the calling function.<P><HR><P>
<B>QAC messages that encompass this guideline:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3415.html">3415</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Right hand operand of '&&' or '||' is an expression with possible side effects. </TD>
</TR>
</TABLE>
<P><HR>
<TABLE WIDTH="100%">
<TR>
<TD WIDTH="355px">
<IMG SRC="prqa_left.png"/>
</TD>
<TD COLSPAN=2 BACKGROUND="prqa_middle.png"/>
</TR>
</TABLE>
<P>
<BR><I><A HREF="misra.html">(c)  The Motor Industry Research Association, 2004</A></I>
<TABLE WIDTH="100%">
  <TR VALIGN="MIDDLE">
    <TD WIDTH="30%">
      <I><B>QA C Source Code Analyser 8.1.2</B></I>
      <BR><I><B>MISRA-C:2004 Compliance Module 3.2</B></I>
      <BR><I>&copy; 2013 Programming Research</I>
      <BR><I>
        www.programmingresearch.com
      </I>
    </TD>
    <TD ALIGN="CENTER" WIDTH="60%">
      <A HREF="PersonIndex.html">Personality Groups</A> | 
      <A HREF="Glossary.html">Glossary</A> | 
      <A HREF="MessageIndex.html">Message Index</A>
      | <A HREF="MISRA-C_2004Index.html">MISRA-C:2004 Rule Index</A>
    </TD>
    <TD ALIGN="RIGHT" WIDTH="10%">
      <A HREF="messages.htm">Contents</A>
    </TD>
  </TR>
</TABLE>
</BODY></HTML>
