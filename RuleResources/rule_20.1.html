<!-- rule_20.1.html
copyright: &copy; 2013 Programming Research
   module: M2CM-3.2-QAC-8.1.2
  purpose: MISRA-C:2004 Rules explanation file
  history: auto-created on 30-Jul-13
-->
<!--
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
-->
<HTML><HEAD><TITLE>QA C Help - Rule 20.1</TITLE>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta http-equiv="Content-Style-Type" content="text/css">
         <link href="css/message.css" rel="stylesheet" type="text/css">
</HEAD><BODY>
<table class="heading">
<tr class="heading">
<td class="heading" rowspan=4 width="85px"><img src="QAC.png"></td>
<td class="heading" align="right" width="11px">
<a href="rule_19.17.html"><img src="left.png" alt="[previous]"></a>
</td>
<td class="heading_number"><span style="white-space:nowrap">MISRA-C:2004&nbsp;&nbsp;Rule&nbsp;&nbsp;20.1:&nbsp;&nbsp;(Required)</span></td>
<td class="heading" align="left" width="11px">
<a href="rule_20.2.html"><img src="right.png" alt="[next]"></a>
</td>
<td class="heading"/>
<td class="heading_message">Reserved identifiers, macros and functions in the standard library, shall not be defined, redefined or undefined.</td>
<tr class="heading">
<td class="heading" height="1px" colspan=7 background="prqa_sep.png"/><td class="heading" width="76px"><img src="prqa_right.png"/></td></tr>
<tr class="heading">
<td colspan=4  class="heading_category"></td>
<td width="70%" class="heading_verbose"/>
<td class="heading_message"/>
</tr>
</table>
It is generally bad practice to #undef a macro which is defined in the standard library.  It is also bad practice to #define a macro name which is a C reserved identifier, a C keyword or the name of any macro, object or function in the standard library.  For example, there are some specific reserved words and function names which are known to give rise to undefined behaviour if they are redefined or undefined, including defined, _ _LINE_ _, _ _FILE_ _, _ _DATE_ _, _ _TIME_ _, _ _STDC_ _, errno and assert.
<P>
See also Rule 19.6 regarding the use of #undef.
<P>
Reserved identifiers are defined by ISO/IEC 9899:1990 [2] Sections 7.1.3 "Reserved identifiers" and 6.8.8 "Predefined macro names". Macros in the standard library are examples of reserved identifiers. Functions in the standard library are examples of reserved identifiers. Any identifier in the standard library is considered a reserved identifier in any context i.e. at any scope or regardless of header files.
<P>
The defining, redefining or undefining of the reserved identifiers defined in 7.13 "Future library directions" is advisory.
<P>
Rule 20.1 applies regardless of which, if any, header files are included.<P>
<P><FONT SIZE=+1><B>Example Code:</B></FONT>
<PRE>
<code>
<pre class="example"><code class="comment">&#x2F;&#x2A;PRQA S 862 &#x2B;&#x2B; &#x2A;&#x2F;</code>
<code class="preprocessor">#include</code><code class="string"> "misra.h"</code>
<code class="preprocessor">#include</code><code class="string"> "m2cmex.h"</code>
<code class="preprocessor">#include</code><code class="string"> "gen.h"</code>

<code class="preprocessor">#define defined &#x21; defined</code><code class="comment">       &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0836 &#x2A;&#x2F;</code>


<code class="preprocessor">#undef __LINE__</code><code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0848 &#x2A;&#x2F;</code>
<code class="preprocessor">#undef __FILE__</code><code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0848 &#x2A;&#x2F;</code>
<code class="preprocessor">#undef __DATE__</code><code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0848 &#x2A;&#x2F;</code>
<code class="preprocessor">#undef __TIME__</code><code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0848 &#x2A;&#x2F;</code>
<code class="preprocessor">#undef __STDC__</code><code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0848 &#x2A;&#x2F;</code>

<code class="preprocessor">#define __LINE__ 1</code><code class="comment">              &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0854 &#x2A;&#x2F;</code>
<code class="preprocessor">#define __FILE__</code><code class="string"> "default"</code><code class="comment">      &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0854 &#x2A;&#x2F;</code>
<code class="preprocessor">#define __DATE__</code><code class="string"> "01&#x2D;01&#x2D;2000"</code><code class="comment">   &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0854 &#x2A;&#x2F;</code>
<code class="preprocessor">#define __TIME__</code><code class="string"> "00&#x3A;00&#x3A;00"</code><code class="comment">     &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0854 &#x2A;&#x2F;</code>
<code class="preprocessor">#define __STDC__</code><code class="comment">                &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code><code class="comment">  &#x2F;&#x2A; 0854 &#x2A;&#x2F;</code>

<code class="preprocessor">#define NULL &#x28;void &#x2A;&#x29;0</code><code class="comment">          &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
<code class="preprocessor">#define tan 1</code><code class="comment">                   &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
<code class="preprocessor">#define printf xprintf</code><code class="comment">          &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>

<code class="keyword">extern</code> S16 test_2001<code class="operator">&#x28;</code> <code class="type">void</code> <code class="operator">&#x29;</code>
<code class="operator">&#x7B;</code>
   <code class="keyword">return</code> <code class="number">1</code>;
<code class="operator">&#x7D;</code>

</pre>
</code>
</PRE>
<P><HR><P>
<B>QAC messages that encompass this guideline:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0836.html">0836</A></TD>
<TD VALIGN=TOP WIDTH="90%"> [U] Definition of macro named 'defined'. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0848.html">0848</A></TD>
<TD VALIGN=TOP WIDTH="90%"> [U] Attempting to #undef '%s', which is a predefined macro name. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="0854.html">0854</A></TD>
<TD VALIGN=TOP WIDTH="90%"> [U] Attempting to #define '%s', which is a predefined macro name. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3439.html">3439</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Macro redefines a keyword. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="4600.html">4600</A></TD>
<TD VALIGN=TOP WIDTH="90%"> The macro '%1s' is also defined in '&lt;%2s&gt;'. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="4601.html">4601</A></TD>
<TD VALIGN=TOP WIDTH="90%"> The macro '%1s' is the name of an identifier in '&lt;%2s&gt;'. </TD>
</TR>
</TABLE>
<P><HR><P>
<B>Related rules:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="15%" ALIGN=CENTER> <A HREF="rule_1.2.html">Rule&nbsp;&nbsp;1.2</A></TD>
<TD VALIGN=TOP WIDTH="85%"> No reliance shall be placed on undefined or unspecified behaviour.</TD>
</TR>

</TABLE>
<P><HR>
<TABLE WIDTH="100%">
<TR>
<TD WIDTH="355px">
<IMG SRC="prqa_left.png"/>
</TD>
<TD COLSPAN=2 BACKGROUND="prqa_middle.png"/>
</TR>
</TABLE>
<P>
<BR><I><A HREF="misra.html">(c)  The Motor Industry Research Association, 2004</A></I>
<TABLE WIDTH="100%">
  <TR VALIGN="MIDDLE">
    <TD WIDTH="30%">
      <I><B>QA C Source Code Analyser 8.1.2</B></I>
      <BR><I><B>MISRA-C:2004 Compliance Module 3.2</B></I>
      <BR><I>&copy; 2013 Programming Research</I>
      <BR><I>
        www.programmingresearch.com
      </I>
    </TD>
    <TD ALIGN="CENTER" WIDTH="60%">
      <A HREF="PersonIndex.html">Personality Groups</A> | 
      <A HREF="Glossary.html">Glossary</A> | 
      <A HREF="MessageIndex.html">Message Index</A>
      | <A HREF="MISRA-C_2004Index.html">MISRA-C:2004 Rule Index</A>
    </TD>
    <TD ALIGN="RIGHT" WIDTH="10%">
      <A HREF="messages.htm">Contents</A>
    </TD>
  </TR>
</TABLE>
</BODY></HTML>
