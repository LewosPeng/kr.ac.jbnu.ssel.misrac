<!-- rule_12.1.html
copyright: &copy; 2013 Programming Research
   module: M2CM-3.2-QAC-8.1.2
  purpose: MISRA-C:2004 Rules explanation file
  history: auto-created on 30-Jul-13
-->
<!--
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
-->
<HTML><HEAD><TITLE>QA C Help - Rule 12.1</TITLE>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta http-equiv="Content-Style-Type" content="text/css">
         <link href="css/message.css" rel="stylesheet" type="text/css">
</HEAD><BODY>
<table class="heading">
<tr class="heading">
<td class="heading" rowspan=4 width="85px"><img src="QAC.png"></td>
<td class="heading" align="right" width="11px">
<a href="rule_11.5.html"><img src="left.png" alt="[previous]"></a>
</td>
<td class="heading_number"><span style="white-space:nowrap">MISRA-C:2004&nbsp;&nbsp;Rule&nbsp;&nbsp;12.1:&nbsp;&nbsp;(Advisory)</span></td>
<td class="heading" align="left" width="11px">
<a href="rule_12.2.html"><img src="right.png" alt="[next]"></a>
</td>
<td class="heading"/>
<td class="heading_message">Limited dependence should be placed on C's operator precedence rules in expressions.</td>
<tr class="heading">
<td class="heading" height="1px" colspan=7 background="prqa_sep.png"/><td class="heading" width="76px"><img src="prqa_right.png"/></td></tr>
<tr class="heading">
<td colspan=4  class="heading_category"></td>
<td width="70%" class="heading_verbose"/>
<td class="heading_message"/>
</tr>
</table>
In addition to the use of parentheses to override default operator precedence, parentheses should also be used to emphasise it.  It is easy to make a mistake with the rather complicated precedence rules of C, and this approach helps to avoid such errors, and helps to make the code easier to read.  However, do not add too many parentheses so as to clutter the code and make it unreadable.
<P>
The following guidelines are suggested in deciding when parentheses are required:
<P>
* no parentheses are required for the right-hand operand of an assignment operator unless the right-hand side itself contains an assignment expression:
<p><pre class="example">
x <code class="operator">&#x3D;</code> a <code class="operator">&#x2B;</code> b;<code class="comment">              &#x2F;&#x2A; acceptable      &#x2A;&#x2F;</code>
x <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x2B;</code> b <code class="operator">&#x29;</code>;<code class="comment">          &#x2F;&#x2A; &#x28;&#x29; not required &#x2A;&#x2F;</code>

</pre>
<P>
* no parentheses are required for the operand of a unary operator:
<p><pre class="example">
x <code class="operator">&#x3D;</code> a <code class="operator">&#x2A;</code> <code class="operator">&#x2D;</code><code class="number">1</code>;<code class="comment">             &#x2F;&#x2A; acceptable      &#x2A;&#x2F;</code>
x <code class="operator">&#x3D;</code> a <code class="operator">&#x2A;</code> <code class="operator">&#x28;</code> <code class="operator">&#x2D;</code><code class="number">1</code> <code class="operator">&#x29;</code>;<code class="comment">         &#x2F;&#x2A; &#x28;&#x29; not required &#x2A;&#x2F;</code>

</pre>
<P>
* otherwise, the operands of binary and ternary operators shall be cast-expressions (see section 6.3.4 of ISO/IEC 9899:1990 [2]) unless all the operators in the expression are the same.
<p><pre class="example">
x <code class="operator">&#x3D;</code> a <code class="operator">&#x2B;</code> b <code class="operator">&#x2B;</code> c;<code class="comment">                   &#x2F;&#x2A; acceptable, but care needed &#x2A;&#x2F;</code>
x <code class="operator">&#x3D;</code> f<code class="operator">&#x28;</code> a <code class="operator">&#x2B;</code> b, c <code class="operator">&#x29;</code>;<code class="comment">               &#x2F;&#x2A; no &#x28;&#x29; required for a &#x2B; b    &#x2A;&#x2F;</code>
x <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x3D;</code><code class="operator">&#x3D;</code> b <code class="operator">&#x29;</code> <code class="operator">&#x3F;</code> a <code class="operator">&#x3A;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x2D;</code> b <code class="operator">&#x29;</code>;
<code class="keyword">if</code> <code class="operator">&#x28;</code> a <code class="operator">&amp;</code><code class="operator">&amp;</code> b <code class="operator">&amp;</code><code class="operator">&amp;</code> c <code class="operator">&#x29;</code><code class="comment">               &#x2F;&#x2A; acceptable                  &#x2A;&#x2F;</code>
x <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x2B;</code> b <code class="operator">&#x29;</code> <code class="operator">&#x2D;</code> <code class="operator">&#x28;</code> c <code class="operator">&#x2B;</code> d <code class="operator">&#x29;</code>;
x <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x2A;</code> <code class="number">3</code> <code class="operator">&#x29;</code> <code class="operator">&#x2B;</code> c <code class="operator">&#x2B;</code> d;
x <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> uint16_t <code class="operator">&#x29;</code> a <code class="operator">&#x2B;</code> b;<code class="comment">          &#x2F;&#x2A; no need for &#x28; &#x28; uint16_t &#x29; a &#x29;  &#x2A;&#x2F;</code>

</pre>
<P>
* even if all operators are the same, parentheses may be used to control the order of operation.  Some operators (e.g. addition and multiplication) that are associative in algebra are not necessarily associative in C.  Similarly, integer operations involving mixed types (prohibited by several rules) may produce different results because of the integral promotions.  The following example written for a 16-bit implementation demonstrates that addition is not associative and that it is important to be clear about the structure of an expression:
<p><pre class="example">
uint16_t a <code class="operator">&#x3D;</code> <code class="number">10U</code>;
uint16_t b <code class="operator">&#x3D;</code> <code class="number">65535U</code>;
uint32_t c <code class="operator">&#x3D;</code> <code class="number">0U</code>;
uint32_t d;

d <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code> a <code class="operator">&#x2B;</code> b <code class="operator">&#x29;</code> <code class="operator">&#x2B;</code> c;<code class="comment">   &#x2F;&#x2A; d is 9; a &#x2B; b wraps modulo 65536 &#x2A;&#x2F;</code>
d <code class="operator">&#x3D;</code> a <code class="operator">&#x2B;</code> <code class="operator">&#x28;</code> b <code class="operator">&#x2B;</code> c <code class="operator">&#x29;</code>;<code class="comment">   &#x2F;&#x2A; d is 65545                       &#x2A;&#x2F;</code>
<code class="comment">&#x2F;&#x2A; this example also deviates from several other rules &#x2A;&#x2F;</code>

</pre>
<P>
Note that Rule <!--RNAME[12.5]--> is a special case of this rule applicable solely to the logical operators, && and ||.<P><HR><P>
<B>QAC messages that encompass this guideline:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3389.html">3389</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended to clarify the ordering of a % operator and another arithmetic operator (* / % + -). </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3391.html">3391</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A conditional operation is the operand of another conditional operator. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3392.html">3392</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A shift, relational or equality operation is the operand of a second identical operator. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3393.html">3393</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. An arithmetic operation (* / + -) is the operand of a different operator with the same precedence. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3394.html">3394</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A shift, relational or equality operation is the operand of a different operator with the same precedence. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3395.html">3395</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A * or / operation is the operand of a + or - operator. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3396.html">3396</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A binary operation is the operand of a conditional operator. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="3397.html">3397</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Extra parentheses recommended. A binary operation is the operand of a binary operator with different precedence. </TD>
</TR>
</TABLE>
<P><HR>
<TABLE WIDTH="100%">
<TR>
<TD WIDTH="355px">
<IMG SRC="prqa_left.png"/>
</TD>
<TD COLSPAN=2 BACKGROUND="prqa_middle.png"/>
</TR>
</TABLE>
<P>
<BR><I><A HREF="misra.html">(c)  The Motor Industry Research Association, 2004</A></I>
<TABLE WIDTH="100%">
  <TR VALIGN="MIDDLE">
    <TD WIDTH="30%">
      <I><B>QA C Source Code Analyser 8.1.2</B></I>
      <BR><I><B>MISRA-C:2004 Compliance Module 3.2</B></I>
      <BR><I>&copy; 2013 Programming Research</I>
      <BR><I>
        www.programmingresearch.com
      </I>
    </TD>
    <TD ALIGN="CENTER" WIDTH="60%">
      <A HREF="PersonIndex.html">Personality Groups</A> | 
      <A HREF="Glossary.html">Glossary</A> | 
      <A HREF="MessageIndex.html">Message Index</A>
      | <A HREF="MISRA-C_2004Index.html">MISRA-C:2004 Rule Index</A>
    </TD>
    <TD ALIGN="RIGHT" WIDTH="10%">
      <A HREF="messages.htm">Contents</A>
    </TD>
  </TR>
</TABLE>
</BODY></HTML>
