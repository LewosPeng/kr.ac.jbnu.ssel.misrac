<!-- rule_21.1.html
copyright: &copy; 2013 Programming Research
   module: M2CM-3.2-QAC-8.1.2
  purpose: MISRA-C:2004 Rules explanation file
  history: auto-created on 30-Jul-13
-->
<!--
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
-->
<HTML><HEAD><TITLE>QA C Help - Rule 21.1</TITLE>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta http-equiv="Content-Style-Type" content="text/css">
         <link href="css/message.css" rel="stylesheet" type="text/css">
</HEAD><BODY>
<table class="heading">
<tr class="heading">
<td class="heading" rowspan=4 width="85px"><img src="QAC.png"></td>
<td class="heading" align="right" width="11px">
<a href="rule_20.12.html"><img src="left.png" alt="[previous]"></a>
</td>
<td class="heading_number"><span style="white-space:nowrap">MISRA-C:2004&nbsp;&nbsp;Rule&nbsp;&nbsp;21.1:&nbsp;&nbsp;(Required)</span></td>
<td class="heading" align="left" width="11px">
</td>
<td class="heading"/>
<td class="heading_message">Minimisation of run-time failures shall be ensured by the use of at least one of (a) static analysis tools/techniques; (b) dynamic analysis tools/techniques; (c) explicit coding of checks to handle run-time faults</td>
<tr class="heading">
<td class="heading" height="1px" colspan=7 background="prqa_sep.png"/><td class="heading" width="76px"><img src="prqa_right.png"/></td></tr>
<tr class="heading">
<td colspan=4  class="heading_category"></td>
<td width="70%" class="heading_verbose"/>
<td class="heading_message"/>
</tr>
</table>
Run-time checking is an issue, which is not specific to C, but it is an issue which C programmers need to pay special attention to.  This is because the C language is weak in its provision of any run-time checking.  C implementations are not required to perform many of the dynamic checks that are necessary for robust software.  It is therefore an issue that C programmers need to consider carefully, adding dynamic checks to code wherever there is potential for run-time errors to occur.
<P>
Where expressions consist only of values within a well-defined range, a run-time check may not be necessary, provided it can be demonstrated that for all values within the defined range the exception cannot occur.  Such a demonstration, if used, should be documented along with the assumptions on which it depends.  However if adopting this approach, be very careful about subsequent modifications of the code which may invalidate the assumptions, or of the assumptions changing for any other reason.<P>
<P><FONT SIZE=+1><B>Example Code:</B></FONT>
<PRE>
<code>
<pre class="example"><code class="comment">&#x2F;&#x2A; PRQA S 2982,3203,3112 &#x2B;&#x2B; &#x2A;&#x2F;</code>

<code class="preprocessor">#include</code><code class="string"> "misra.h"</code>
<code class="preprocessor">#include</code><code class="string"> "m2cmex.h"</code>
<code class="preprocessor">#include</code><code class="string"> &lt;string.h&gt;</code>

<code class="keyword">extern</code> S16 test_2101<code class="operator">&#x28;</code> <code class="type">void</code> <code class="operator">&#x29;</code>
<code class="operator">&#x7B;</code>
    S16 ia[<code class="number">10</code>];

    <code class="keyword">if</code> <code class="operator">&#x28;</code>s16a <code class="operator">&gt;</code><code class="operator">&#x3D;</code> <code class="number">30767</code><code class="operator">&#x29;</code>
    <code class="operator">&#x7B;</code>
        s16r <code class="operator">&#x3D;</code> s16a <code class="operator">&#x2B;</code> <code class="number">3000</code>;<code class="comment">                      &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    s16r <code class="operator">&#x3D;</code> s16a <code class="operator">&#x2B;</code> <code class="number">4000</code>;<code class="comment">                          &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>


    <code class="keyword">if</code> <code class="operator">&#x28;</code>s16a <code class="operator">&lt;</code> <code class="number">0</code><code class="operator">&#x29;</code>
    <code class="operator">&#x7B;</code>
        u16r <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code>U16<code class="operator">&#x29;</code>s16a;<code class="comment">                        &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    u16r <code class="operator">&#x3D;</code> <code class="operator">&#x28;</code>U16<code class="operator">&#x29;</code>s16a;<code class="comment">                            &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>

    <code class="keyword">if</code> <code class="operator">&#x28;</code>s16c <code class="operator">&#x3D;</code><code class="operator">&#x3D;</code> <code class="number">0</code><code class="operator">&#x29;</code>
    <code class="operator">&#x7B;</code>
        s16r <code class="operator">&#x3D;</code> s16r <code class="operator">&#x2F;</code> s16c;<code class="comment">                      &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    s16r <code class="operator">&#x3D;</code> s16r <code class="operator">&#x2F;</code> s16c;<code class="comment">                          &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>


    <code class="keyword">if</code> <code class="operator">&#x28;</code>u16a <code class="operator">&gt;</code><code class="operator">&#x3D;</code> <code class="number">0x1</code>FFFU<code class="operator">&#x29;</code>
    <code class="operator">&#x7B;</code>
        u16r <code class="operator">&#x3D;</code> u16a <code class="operator">&#x2A;</code> <code class="number">16U</code>;<code class="comment">                       &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    u16r <code class="operator">&#x3D;</code> <code class="number">10U</code> <code class="operator">&#x2D;</code> u16a;<code class="comment">                           &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>

    <code class="keyword">if</code> <code class="operator">&#x28;</code>s16b <code class="operator">&gt;</code> <code class="number">9</code><code class="operator">&#x29;</code>
    <code class="operator">&#x7B;</code>
        ia [s16b] <code class="operator">&#x3D;</code> <code class="number">1</code>;<code class="comment">                           &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    ia[s16b] <code class="operator">&#x3D;</code> <code class="number">1</code>;<code class="comment">                                &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>

    <code class="operator">&#x7B;</code>
        PC a[<code class="number">10</code>];
        PC b[<code class="number">11</code>];

        strncpy<code class="operator">&#x28;</code>a, b, <code class="keyword">sizeof</code><code class="operator">&#x28;</code>b<code class="operator">&#x29;</code><code class="operator">&#x29;</code>;<code class="comment">                &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        PC a[<code class="number">10</code>];
        PC b[<code class="number">11</code>];

        <code class="keyword">if</code> <code class="operator">&#x28;</code>s16a <code class="operator">&gt;</code> <code class="keyword">sizeof</code><code class="operator">&#x28;</code>a<code class="operator">&#x29;</code><code class="operator">&#x29;</code>
        <code class="operator">&#x7B;</code>
            strncpy<code class="operator">&#x28;</code>a, b, s16a<code class="operator">&#x29;</code>;<code class="comment">                 &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        <code class="operator">&#x7D;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        PC a[<code class="number">10</code>];
        PC b[<code class="number">11</code>];

        <code class="keyword">if</code> <code class="operator">&#x28;</code>s16a <code class="operator">&gt;</code> <code class="keyword">sizeof</code><code class="operator">&#x28;</code>a<code class="operator">&#x29;</code><code class="operator">&#x29;</code>
        <code class="operator">&#x7B;</code>
        <code class="operator">&#x7D;</code>

        strncpy<code class="operator">&#x28;</code>a, b, s16a<code class="operator">&#x29;</code>;<code class="comment">                     &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        <code class="keyword">if</code> <code class="operator">&#x28;</code>u16a <code class="operator">&lt;</code> <code class="number">10</code><code class="operator">&#x29;</code>
        <code class="operator">&#x7B;</code>
            <code class="keyword">if</code> <code class="operator">&#x28;</code>u16b <code class="operator">&gt;</code><code class="operator">&#x3D;</code> <code class="number">10</code><code class="operator">&#x29;</code>
            <code class="operator">&#x7B;</code>
                u16c <code class="operator">&#x3D;</code> u16a <code class="operator">&#x2F;</code> u16b;<code class="comment">              &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
            <code class="operator">&#x7D;</code>
        <code class="operator">&#x7D;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        <code class="keyword">if</code> <code class="operator">&#x28;</code>u16b <code class="operator">&gt;</code> u16a<code class="operator">&#x29;</code>
        <code class="operator">&#x7B;</code>
            u16a % u16b;<code class="comment">                         &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        <code class="operator">&#x7D;</code>

        u16a <code class="operator">&lt;</code><code class="operator">&lt;</code> <code class="number">0</code>;<code class="comment">                               &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        u16b <code class="operator">&#x7C;</code> <code class="number">0</code>;<code class="comment">                                &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        <code class="number">0</code> <code class="operator">&#x7C;</code> u16a;<code class="comment">                                &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        <code class="number">0x</code>FFFFFFFFu <code class="operator">&amp;</code> u16a;<code class="comment">                      &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        s16a <code class="operator">&#x3D;</code> <code class="number">1</code>;
        s16a <code class="operator">&#x2A;</code> u16a;<code class="comment">                             &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
    <code class="operator">&#x7D;</code>

    <code class="operator">&#x7B;</code>
        S16 i;

        <code class="keyword">for</code> <code class="operator">&#x28;</code>i <code class="operator">&#x3D;</code> <code class="number">0</code>; i <code class="operator">&lt;</code> <code class="number">1</code>; <code class="operator">&#x2B;</code><code class="operator">&#x2B;</code>i<code class="operator">&#x29;</code><code class="comment">                  &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        <code class="operator">&#x7B;</code>
        <code class="operator">&#x7D;</code>


        i <code class="operator">&#x3D;</code> <code class="number">10</code>;

        <code class="keyword">while</code> <code class="operator">&#x28;</code>i <code class="operator">&lt;</code><code class="operator">&#x3D;</code> <code class="number">10</code><code class="operator">&#x29;</code><code class="comment">                          &#x2F;&#x2A; MISRA Violation &#x2A;&#x2F;</code>
        <code class="operator">&#x7B;</code>
            <code class="operator">&#x2B;</code><code class="operator">&#x2B;</code>i;
        <code class="operator">&#x7D;</code>
    <code class="operator">&#x7D;</code>

    <code class="keyword">return</code> s16r;
<code class="operator">&#x7D;</code>

</pre>
</code>
</PRE>
<P><HR><P>
<B>QAC messages that encompass this guideline:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2791.html">2791</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Right hand operand of shift operator is negative or too large. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2792.html">2792</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Right hand operand of shift operator is negative or too large. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2801.html">2801</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Overflow in signed arithmetic operation. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2802.html">2802</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Overflow in signed arithmetic operation. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2811.html">2811</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Dereference of NULL pointer. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2812.html">2812</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Dereference of NULL pointer. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2821.html">2821</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Arithmetic operation on NULL pointer. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2822.html">2822</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Arithmetic operation on NULL pointer. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2831.html">2831</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Division by zero. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2832.html">2832</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Division by zero. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2841.html">2841</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Dereference of an invalid pointer value. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2842.html">2842</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Dereference of an invalid pointer value. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2845.html">2845</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Constant: Maximum number of characters to be written is larger than the target buffer size. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2846.html">2846</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Maximum number of characters to be written is larger than the target buffer size. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2847.html">2847</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Maximum number of characters to be written is larger than the target buffer size. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2871.html">2871</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Infinite loop identified. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2872.html">2872</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This loop, if entered, will never terminate. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2877.html">2877</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This loop will never be executed more than once. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2891.html">2891</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Negative value implicitly converted to an unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2892.html">2892</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Negative value implicitly converted to an unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2896.html">2896</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Negative value cast to an unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2897.html">2897</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Negative value cast to an unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2901.html">2901</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Positive integer value truncated by implicit conversion to a smaller unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2902.html">2902</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Positive integer value truncated by implicit conversion to a smaller unsigned type. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2911.html">2911</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Definite: Wraparound in unsigned arithmetic operation. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2912.html">2912</A></TD>
<TD VALIGN=TOP WIDTH="90%"> Apparent: Wraparound in unsigned arithmetic operation. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2980.html">2980</A></TD>
<TD VALIGN=TOP WIDTH="90%"> The value of this function parameter is never used before being modified. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2981.html">2981</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This initialization is redundant. The value of this object is never used before being modified. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2982.html">2982</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This assignment is redundant. The value of this object is never used before being modified. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2983.html">2983</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This assignment is redundant. The value of this object is never subsequently used. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2984.html">2984</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This operation is redundant. The value of the result is always '%1s'. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2985.html">2985</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This operation is redundant. The value of the result is always that of the left-hand operand. </TD>
</TR>
<TR>
<TD VALIGN=TOP WIDTH="10%" ALIGN=CENTER> <A HREF="2986.html">2986</A></TD>
<TD VALIGN=TOP WIDTH="90%"> This operation is redundant. The value of the result is always that of the right-hand operand. </TD>
</TR>
</TABLE>
<P><HR><P>
<B>Related rules:</B>
<P>
<TABLE WIDTH="90%" BORDER=1 CELLSPACING=0 >
<TR>
<TD VALIGN=TOP WIDTH="15%" ALIGN=CENTER> <A HREF="rule_20.3.html">Rule&nbsp;&nbsp;20.3</A></TD>
<TD VALIGN=TOP WIDTH="85%"> The validity of values passed to library functions shall be checked.</TD>
</TR>

</TABLE>
<P><HR>
<TABLE WIDTH="100%">
<TR>
<TD WIDTH="355px">
<IMG SRC="prqa_left.png"/>
</TD>
<TD COLSPAN=2 BACKGROUND="prqa_middle.png"/>
</TR>
</TABLE>
<P>
<BR><I><A HREF="misra.html">(c)  The Motor Industry Research Association, 2004</A></I>
<TABLE WIDTH="100%">
  <TR VALIGN="MIDDLE">
    <TD WIDTH="30%">
      <I><B>QA C Source Code Analyser 8.1.2</B></I>
      <BR><I><B>MISRA-C:2004 Compliance Module 3.2</B></I>
      <BR><I>&copy; 2013 Programming Research</I>
      <BR><I>
        www.programmingresearch.com
      </I>
    </TD>
    <TD ALIGN="CENTER" WIDTH="60%">
      <A HREF="PersonIndex.html">Personality Groups</A> | 
      <A HREF="Glossary.html">Glossary</A> | 
      <A HREF="MessageIndex.html">Message Index</A>
      | <A HREF="MISRA-C_2004Index.html">MISRA-C:2004 Rule Index</A>
    </TD>
    <TD ALIGN="RIGHT" WIDTH="10%">
      <A HREF="messages.htm">Contents</A>
    </TD>
  </TR>
</TABLE>
</BODY></HTML>
